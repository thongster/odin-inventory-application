<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles.css" />
    <link rel="icon" href="/icon.png" />
    <title>Mage Spellbook | Inventory Application</title>
  </head>
  <body>
    <%- include("partials/header.ejs") %>

    <main class="main">
      <section class="section">

        <!-- Element Header -->
        <header class="element-detail-header">
          <div class="element-detail-text">
            <h2 class="element-detail-name"><%= element.name %></h2>
            <p class="element-detail-description">
              <%= element.description %>
            </p>
          </div>

          <div class="element-detail-actions">
            <a
              href="/elements/<%= element.name %>/update"
              class="button-secondary"
            >
              Update Element
            </a>

            <form
              action="/elements/<%= element.name %>/delete"
              method="POST"
              onsubmit="return confirm('Are you sure you want to delete this element? All associated spells will be affected.');"
            >
              <button type="submit" class="button-danger">
                Delete Element
              </button>
            </form>
          </div>
        </header>

        <%- include("partials/errors.ejs") %>

        <!-- Spells in Element -->
        <% if (spells.length === 0) { %>
          <p class="empty-state">
            No spells have been recorded under this element yet.
          </p>
        <% } else { %>
          <div class="spell-grid">
            <% spells.forEach((spell) => { %>
              <article class="spell-card">
                <header class="spell-card-header">
                  <h3 class="spell-name">
                    <a
                      href="/spells/<%= spell.id %>"
                      class="spell-link"
                    >
                      <%= spell.name %>
                    </a>
                  </h3>
                </header>

                <p class="spell-description">
                  <%= spell.description %>
                </p>

                <ul class="spell-meta">
                  <li><strong>Mana:</strong> <%= spell.mana %></li>
                  <li><strong>Cooldown:</strong> <%= spell.cooldown %>s</li>
                  <li>
                    <strong>Damage:</strong>
                    <%= spell.damage !== null ? spell.damage : 'â€”' %>
                  </li>
                  <li><strong>Range:</strong> <%= spell.range %></li>
                </ul>
              </article>
            <% }) %>
          </div>
        <% } %>

      </section>
    </main>

    <%- include("partials/footer.ejs") %>

  </body>
</html>
