<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles.css" />
    <link rel="icon" href="/icon.png" />
    <title>Mage Spellbook | Inventory Application</title>
  </head>
  <body>
    <%- include("partials/header.ejs") %>

    <main class="main">
      <section class="section">

        <article class="form-card">

          <header class="form-header">
            <h2 class="form-title">Update Spell</h2>
            <p class="form-subtitle">
              Revise the recorded details of this spell.
            </p>
          </header>

          <%- include("partials/errors.ejs") %>

          <form
            action="/spells/<%= spell.id %>/update"
            method="POST"
            class="form"
          >
            <div class="form-group">
              <label for="name">Spell Name</label>
              <input
                type="text"
                name="name"
                value="<%= spell.name %>"
                required
              />
            </div>

            <div class="form-group">
              <label for="description">Description</label>
              <textarea
                rows="4"
                name="description"
                required
              ><%= spell.description %></textarea>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="damage">Damage</label>
                <input
                  type="number"
                  name="damage"
                  value="<%= spell.damage %>"
                  required
                />
              </div>
              <div class="form-group">
                <label for="mana">Mana</label>
                <input
                  type="number"
                  name="mana"
                  value="<%= spell.mana %>"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="cooldown">Cooldown (seconds)</label>
                <input
                  type="number"
                  name="cooldown"
                  value="<%= spell.cooldown %>"
                  required
                />
              </div>

              <div class="form-group">
                <label for="range">Range</label>
                <select name="range" required>
                  <option value="Close" <%= spell.range === 'Close' ? 'selected' : '' %>>Close</option>
                  <option value="Medium" <%= spell.range === 'Medium' ? 'selected' : '' %>>Medium</option>
                  <option value="Long" <%= spell.range === 'Long' ? 'selected' : '' %>>Long</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="element">Element</label>
              <select name="element" required>
                <% elements.forEach((element) => { %>
                  <option
                    value="<%= element.name %>"
                    <%= spell.element === element.name ? 'selected' : '' %>
                  >
                    <%= element.name %>
                  </option>
                <% }) %>
              </select>
            </div>

            <div class="form-actions">
              <button type="submit" class="button-primary">
                Update Spell
              </button>
              <a
                href="/spells/<%= spell.id %>"
                class="button-secondary"
              >
                Cancel
              </a>
            </div>
          </form>

        </article>

      </section>
    </main>

    <%- include("partials/footer.ejs") %>

  </body>
</html>
